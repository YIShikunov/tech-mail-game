1 ИГРОК, 2 ИГРОК - участники игры

ИГРОВОЕ ПОЛЕ или ПОЛЕ - граф, изображенный на рисунке в виде:
    Многоугольники соответствуют вершинам
    Смежность многоугольников соответствует смежности вершин
    
КЛЕТКА - вершина ИГРОВОГО ПОЛЯ
БАЗА (1/2) ИГРОКА - КЛЕТКА, обозначенная (верхним/нижним) пятиугольником
ТЕРРИТОРИЯ (1/2) ИГРОКА - КЛЕТКИ, обозначенные (верхними/нижними) маленькими треугольниками
НЕЙТРАЛЬНАЯ ТЕРРИТОРИЯ - КЛЕТКИ, обозначенные большими треугольниками

Каждой КЛЕТКЕ может соответствовать ФИГУРА
Каждой ФИГУРЕ соответствует ровно одна КЛЕТКА
ФИГУРА НАХОДИТСЯ на КЛЕТКЕ, если она ей соответствует
КЛЕТКА ПУСТАЯ, если ей на ней не НАХОДИТСЯ ни одна ФИГУРА
Каждая ФИГУРА ПРИНАДЛЕЖИТ 1 ИГРОКУ или ПРИНАДЛЕЖИТ 2 ИГРОКУ
КОРОЛЬ - ФИГУРА
РЯДОВАЯ ФИГУРА - ФИГУРА, не являющаяся КОРОЛЕМ
Каждой РЯДОВОЙ ФИГУРЕ может соответствовать не более одного ЭЛЕМЕНТА
ЭЛЕМЕНТЫ - ОГОНЬ, ВОДА, ДЕРЕВО, МЕТАЛЛ и ЗЕМЛЯ
Множество ЭЛЕМЕНТОВ изоморфно кольцу вычетов по модулю 5:
    0 <-> ОГОНЬ
    1 <-> МЕТАЛЛ
    2 <-> ДЕРЕВО
    3 <-> ЗЕМЛЯ
    4 <-> ВОДА
Каждая РЯДОВАЯ ФИГУРА является СКРЫТОЙ или ОТКРЫТОЙ
Если ФИГУРА скрыта, то соответствующий ей элемент известен ИГРОКУ, которому эта ФИГУРА ПРИНАДЛЕЖИТ
Если ФИГУРА открыта, то то соответствующий ей элемент известен обоим ИГРОКАМ
ФИГУРА ПЕРЕДВИГАЕТСЯ с КЛЕТКИ А на КЛЕТКУ Б, если ФИГУРА перестает НАХОДИТЬСЯ на А и начинает НАХОДИТЬСЯ на Б
ФИГУРА УНИЧТОЖАЕТСЯ, если она более не существует в игре
КОРОЛЬ может ВЛАДЕТЬ ЭЛЕМЕНТОМ

Игра состоит из ФАЗЫ РАССТАНОВКИ и ФАЗЫ ИГРЫ

В начале игры:
    БАЗАМ (1/2) соответствуют КОРОЛИ, ПРИНАДЛЕЖАЩИЕ (1/2) ИГРОКУ
    Все КОРОЛИ владеют всеми ЭЛЕМЕНТАМИ
    КЛЕТКАМ из ТЕРРИТОРИЙ ИГРОКОВ соответствуют РЯДОВЫЕ ФИГУРЫ, ПРИНАДЛЕЖАЩИЕ (1/2) ИГРОКУ
    Все РЯДОВЫЕ ФИГУРЫ являются СКРЫТЫМИ
    Всем РЯДОВЫМ ФИГУРАМ не соответствует ЭЛЕМЕНТОВ
    КЛЕТКАМ из НЕЙТРАЛЬНОЙ ТЕРРИТОРИИ не соответствует ФИГУР
    Игра начинается с ФАЗЫ РАССТАНОВКИ

В ФАЗЕ РАССТАНОВКИ каждый ИГРОК обязан скрытно поставить в соответствие каждой ПРИНАДЛЕЖАЩЕЙ ему РЯДОВОЙ ФИГУРЕ любой ЭЛЕМЕНТ таким образом, чтобы каждому ЭЛЕМЕНТУ соответствовало ровно три РЯДОВЫЕ ФИГУРЫ, ПРИНАДЛЕЖАЩИЕ этому ИГРОКУ
В ФАЗЕ РАССТАНОВКИ если каждой РЯДОВОЙ ФИГУРЕ соответствует ЭЛЕМЕНТ, ФАЗА РАССТАНОВКИ прекращается и начинается ФАЗА ИГРЫ

В ФАЗЕ ИГРЫ ровно один ИГРОК может быть ОБЯЗАН СДЕЛАТЬ ХОД
В ФАЗЕ ИГРЫ ИГРОК, ОБЯЗАННЫЙ СДЕЛАТЬ ХОД обязан выбрать любую ФИГУРУ и КЛЕТКУ, смежную с КЛЕТКОЙ, на которой находится эта фигура
Если ИГРОК выбрал ПУСТУЮ КЛЕТКУ, то выбранная ФИГУРА ПЕРЕДВИГАЕТСЯ с КЛЕТКИ, на которой НАХОДИТСЯ на выбранную КЛЕТКУ, после чего другой ИГРОК ОБЯЗАН СДЕЛАТЬ ХОД
Если РЯДОВАЯ ФИГУРА ПЕРЕМЕЩАЕТСЯ на БАЗУ, то ИГРОК, которому она ПРИНАДЛЕЖИТ, обязан выбрать ЭЛЕМЕНТ, не соответствующий ФИГУРЕ, после чего она становится СКРЫТОЙ, и выбранный ЭЛЕМЕНТ начинает соответствовать ей
Если ИГРОК выбрал не ПУСТУЮ КЛЕТКУ, то между выбранной ФИГУРОЙ и ФИГУРОЙ, соответствующей выбранной КЛЕТКЕ происходит БОЙ, после чего другой ИГРОК ОБЯЗАН СДЕЛАТЬ ХОД
Если КОРОЛЬ не ВЛАДЕЕТ ни одним ЭЛЕМЕНТОМ, то ИГРОК, которому ПРИНАДЛЕЖИТ этот КОРОЛЬ, проигрывает игру, после чего игра прекращается

БОЙ:
    БОЙ может происходить между упорядоченной парой ФИГУР
    ИСПОЛЬЗУЕМЫЙ ЭЛЕМЕНТ РЯДОВОЙ ФИГУРЫ равен соответствующему ей ЭЛЕМЕНТУ
    ИСПОЛЬЗУЕМЫЙ ЭЛЕМЕНТ КОРОЛЯ выбирается ИГРОКОМ, которому ПРИНАДЛЕЖИТ КОРОЛЬ из ЭЛЕМЕНТОВ, которыми ВЛАДЕЕТ КОРОЛЬ
    Когда определены ИСПОЛЬЗУЕМЫЕ ЭЛЕМЕНТЫ, обе ФИГУРЫ становятся ОТКРЫТЫМИ
    ИСХОД БОЯ равен ПРАВИЛУ БОЯ от упорядоченной пары ИСПОЛЬЗУЕМЫХ ЭЛЕМЕНТОВ ФИГУР, между которыми происходит БОЙ
    Если ИСХОД БОЯ - ПОБЕДА, то вторая ФИГУРА УНИЧТОЖАЕТСЯ, а первая ПЕРЕМЕЩАЕТСЯ на КЛЕТКУ, которой соответствовала вторая ФИГУРА
    Если ИСХОД БОЯ - ПОРАЖЕНИЕ, то первая ФИГУРА УНИЧТОЖАЕТСЯ
    Если ИСХОД БОЯ - ВЗАИМОУНИЧТОЖЕНИЕ, то обе ФИГУРЫ УНИЧТОЖАЮТСЯ
    Если КОРОЛЬ должен быть УНИЧТОЖЕН в результате БОЯ, то вместо этого он перестает ВЛАДЕТЬ своим ИСПОЛЬЗУЕМЫМ ЭЛЕМЕНТОМ
    
    ПРАВИЛО БОЯ - функция (ЭЛЕМЕНТ, ЭЛЕМЕНТ) -> (НИЧЬЯ или ПОБЕДА или ПОРАЖЕНИЕ или ВЗАИМОУНИЧТОЖЕНИЕ)
    ПРАВИЛО БОЯ (х, х) -> ВЗАИМОУНИЧТОЖЕНИЕ
    ПРАВИЛО БОЯ (х, х+1) -> ПОБЕДА
    ПРАВИЛО БОЯ (х, х+2) -> ПОБЕДА
    ПРАВИЛО БОЯ (х, х+3) -> НИЧЬЯ
    ПРАВИЛО БОЯ (х, х+4) -> ПОРАЖЕНИЕ